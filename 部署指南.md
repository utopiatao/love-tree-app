# 🚀 情侣网页部署指南

## 📋 部署概览

我们的情侣网页现在支持：
- **本地存储**: 在浏览器中保存数据（默认）
- **云端同步**: 通过Supabase实现多设备数据同步
- **免费部署**: 使用Vercel免费托管网站

## 🌐 方案一：Vercel + Supabase（推荐）

### 第一步：部署网站到Vercel

1. **注册Vercel账户**
   - 访问 [vercel.com](https://vercel.com)
   - 使用GitHub/Google账户注册

2. **上传代码**
   - 方式A：GitHub仓库导入
     - 将代码上传到GitHub
     - 在Vercel中导入仓库
   - 方式B：直接拖拽文件
     - 将所有文件拖拽到Vercel部署界面

3. **部署设置**
   - 项目名称：`love-tree-app`
   - 根目录：`/`
   - 点击"Deploy"

4. **获取网站地址**
   - 部署完成后获得类似：`https://love-tree-app.vercel.app`

### 第二步：配置Supabase数据库

1. **注册Supabase账户**
   - 访问 [supabase.com](https://supabase.com)
   - 免费注册账户

2. **创建新项目**
   - 点击"New Project"
   - 项目名称：`love-tree-db`
   - 数据库密码：设置一个强密码
   - 区域选择：`Southeast Asia (Singapore)` (对中国用户较快)

3. **创建数据表**
   - 进入SQL Editor
   - 执行以下SQL语句：

```sql
-- 创建情侣数据表
CREATE TABLE love_tree_data (
    id SERIAL PRIMARY KEY,
    couple_id VARCHAR(100) UNIQUE NOT NULL,
    data JSONB NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 创建更新时间触发器
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER update_love_tree_data_updated_at 
    BEFORE UPDATE ON love_tree_data 
    FOR EACH ROW 
    EXECUTE FUNCTION update_updated_at_column();
```

4. **获取API配置**
   - 进入Project Settings -> API
   - 复制以下信息：
     - Project URL: `https://xxx.supabase.co`
     - Anon public key: `eyJhbGci...`

### 第三步：配置网站云端同步

1. **访问你的网站**
   - 打开部署好的网站地址

2. **设置云端同步**
   - 点击"设置"标签页
   - 点击"配置云端同步"
   - 输入Supabase URL和API密钥

3. **获取情侣ID**
   - 点击"获取情侣ID"
   - 复制ID分享给TA

4. **TA的设置步骤**
   - TA访问同一个网站
   - 配置相同的Supabase信息
   - 在浏览器控制台输入：`localStorage.setItem('coupleId', '你的情侣ID')`
   - 刷新页面

## 🏠 方案二：本地使用（简单版）

如果暂时不需要云端同步，可以直接：

1. **下载所有文件**
   - `index.html`
   - `styles.css` 
   - `script.js`

2. **本地运行**
   - 双击`index.html`在浏览器中打开
   - 所有数据自动保存在浏览器本地存储中

3. **数据备份**
   - 定期在设置中点击"导出数据"
   - 保存备份文件到安全位置

## 🔧 高级配置选项

### 自定义域名（Vercel）

1. 购买域名（推荐：阿里云、腾讯云）
2. 在Vercel项目设置中添加自定义域名
3. 配置DNS记录指向Vercel

### 数据库优化（Supabase）

1. **启用实时同步**
```sql
-- 启用实时订阅
ALTER TABLE love_tree_data REPLICA IDENTITY FULL;
```

2. **设置RLS安全策略**
```sql
-- 启用行级安全
ALTER TABLE love_tree_data ENABLE ROW LEVEL SECURITY;

-- 创建访问策略
CREATE POLICY "用户只能访问自己的数据" ON love_tree_data
    FOR ALL USING (TRUE);
```

## 📱 访问和使用

### 电脑端
- 直接访问网站地址
- 建议使用Chrome浏览器

### 手机端
- 在微信/浏览器中打开网站
- 添加到主屏幕，体验接近APP

### 多设备同步
- 确保所有设备配置相同的Supabase信息
- 使用相同的情侣ID
- 数据会自动在设备间同步

## 🆘 常见问题

### Q: 网站打不开怎么办？
A: 
- 检查网络连接
- 尝试使用手机流量访问
- 联系我们获取镜像地址

### Q: 数据同步失败？
A: 
- 检查Supabase配置是否正确
- 确保网络可以访问supabase.co
- 数据仍保存在本地，不会丢失

### Q: 忘记情侣ID怎么办？
A: 
- 在设置页面点击"获取情侣ID"
- 或在浏览器控制台输入：`localStorage.getItem('coupleId')`

### Q: 想要更多功能怎么办？
A: 
- 当前版本包含所有基础功能
- 未来可以根据需求添加新功能
- 所有数据都兼容未来版本

## 💝 享受你们的爱情时光

部署完成后，你们就有了一个专属的爱情空间！

记得：
- 每天打卡获得水滴 💧
- 用水滴浇灌爱情树 🌱
- 记录美好的日记和照片 📝📷
- 见证你们的爱情成长 💕

愿你们的爱情像小树一样茁壮成长！ 